{% extends 'dashboards/base.html' %}

{% block content %}
    {% include 'dashboards/partials/dashboard_header.html' with dashboard_title="HR Management Dashboard" dashboard_subtitle="Welcome back, "|add:hr_user.get_full_name|default:hr_user.username|add:" | Manage your workforce efficiently" %}

    <div class="row">
        {% include 'dashboards/partials/stats_card.html' with card_size="4" card_title="Company Overview" card_icon="fas fa-building" header_bg_class="bg-primary" card_type="overview" stats_data=company_overview_data %}
        
        <div class="col-md-8 mb-4">
            <div class="card h-100">
                <div class="card-header bg-success text-white">
                    <h5 class="mb-0"><i class="fas fa-clock"></i> Recent Activity (Last 30 days)</h5>
                </div>
                <div class="card-body">
                    {% if recent_hires_count > 0 %}
                        <p class="mb-3"><strong>{{ recent_hires_count }} new hire{{ recent_hires_count|pluralize }}</strong> in the last 30 days</p>
                        <div class="row">
                            {% for hire in recent_hires %}
                                <div class="col-md-6 mb-2">
                                    <div class="card border-light">
                                        <div class="card-body py-2">
                                            <h6 class="card-title mb-1">{{ hire.full_name }}</h6>
                                            <small class="text-muted">{{ hire.role.title }} - {{ hire.role.department.name }}</small><br>
                                            <small class="text-success">Hired: {{ hire.hire_date|date:"M d, Y" }}</small>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="text-center py-3">
                            <i class="fas fa-user-plus fa-2x text-muted mb-2"></i>
                            <p class="text-muted mb-0">No new hires in the last 30 days</p>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    {% include 'dashboards/partials/action_buttons.html' with section_title="HR Management Tools" section_icon="fas fa-tools" header_bg_class="bg-info text-white" actions=hr_actions section_note="HR management tools will be implemented in future phases." %}

    {% include 'dashboards/partials/data_table.html' with table_title="Department Overview" table_icon="fas fa-sitemap" table_headers=dept_table_headers table_data=dept_table_data empty_title="No Departments Found" empty_message="Create departments to see statistics here." empty_icon="fas fa-building" %}
{% endblock %}