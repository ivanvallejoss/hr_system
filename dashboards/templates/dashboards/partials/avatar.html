{# dashboards/templates/dashboards/partials/avatar.html #}
{% comment %} 
    Componente reutilizable para mostrar avatar de empleado
    Uso:
        {% include 'dashboards/partials/avatar.html' with employee=employee size='120' %}
    Parámetros:
    - employee: objeto Employee (required)
    - size: tamaño en px (default: 80)
    - css_class: clases CSS adicionales (opcional)
     {% endcomment %}

{% load static %}

{% if not size %}
    {% with size="80" %}
    {% endwith %}
{% endif %}

<div class="avatar-container d-inline-block" style="width: {{ size }}px; height: {{ size }}px;">
    {% if employee.profile_picture %}
        <!-- Si tiene foto, la mostramos -->
        <img src="{{ employee.profile_picture.url }}" 
        alt="{{ employee.full_name }}"
        class="rounded-circle {{ css_class|default:'' }}"
        style="width: 100%; height: 100%; object-fit: cover; border: 3px solid #dee2e6;"
        onerror="this.style.display='none'; this.nextElementSibling.style.display='flex;'">

        <!-- fallback si la imagen falta al cargar -->
         <div class="rounded-circle bg-secondary d-none align-items-center justify-content-center"
         style="width: 100%; height: 100%; border: 3px solid #dee2e6;">
            <span class="text-black fw-bold" style="font-size: {{ size|add:'-60' }}px;">
                {{ employee.user.first_name|first|upper|default:"?" }}{{employee.user.last_name|first|upper|default:""}}
            </span>
         </div>
    {% else %}
        <!-- Si el empleado NO tiene foto: mostramos iniciales -->
        <div class="rounded-circle bg-gradient d-flex align-items-center justify-content-center"
        style="width: 100%; height: 100%; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border: 3px solid #dee2e6;">
            <span class="text-black fw-bold" style="font-size: {{ size|add:'-60' }}px">
                {{ employee.user.first_name|first|upper|default:"?" }}{{ employee.user.last_name|first|upper|default:"" }}
            </span>
        </div>
    {% endif %}
</div>